<html>
<head>
 <title>Processing Sample</title>
  <script type="text/javascript" src="processing.js"></script>
  <script type="text/javascript">
// ロードされた時に実行
window.onload = function() {
  // canvas 要素
  var canvas = document.getElementsByTagName('canvas')[0];
  // Processing のソースコード
  //var code = "size(400, 400); noStroke(); fill(255, 0, 0, 255 * 0.5); ellipse(200, 150, 200, 200); fill(0, 255, 0, 255 * 0.5); ellipse(250, 250, 200, 200); fill(0, 0, 155, 255 * 0.5); ellipse(150, 250, 200, 200);";
  var code = 'String[] lines;int[][] coord;void setup(){size(1000,800);openFileChooser();}void openFileChooser(){selectInput("Select a RML/PATH file","fileSelected");}void fileSelected(File selection){if(selection == null){println("Window was closed.");} else {String path = selection.getAbsolutePath();println("User selected "+ path);lines = loadStrings(path);coord = new int[lines.length][2];for(int i=0;i<lines.length;i++){//println(lines[i]);String x = lines[i].split(" ")[0];String y = lines[i].split(" ")[1];print(x);print(":");print(y);println();coord[i][0] = int(x);coord[i][1] = int(y);}}for(int i=0;i<coord.length;i++){print(coord[i][0]);print(":");print(coord[i][1]);println();}}int i = 0;int x1,y1,x2,y2;void draw(){if(coord!=null && i < coord.length-1){x1=coord[i][0];y1=coord[i][1];x2=coord[i+1][0];y2=coord[i+1][1];//disp(x1,y1,x2,y2);if(x2 == -1 || y2 == -1 ){i = i+2;} else {line(x1,y1,x2,y2);disp(x1,y1,x2,y2);i ++;}println(i);if(i>coord.length){while(true);}}}void disp(int x1,int y1,int x2,int y2){print(x1);print(":");print(y1);print(":");print(x2);print(":");print(y2);println();}';
  // Processing 関数を呼び出す
  Processing(canvas, code);
};
  </script>
 </head>
 <body>
  <h1>Processing Sample</h1>
  <div>
   <canvas width="400" height="400"></canvas>
  </div>
</body>
</html>

